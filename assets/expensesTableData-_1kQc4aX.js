import{b as S,q as P,ao as k,ap as r,aq as D,ar as x,$ as G,as as Q,a2 as T,ae as A,at as U,af as R,ah as N}from"./index-G1bMk4i-.js";import{d as q}from"./FormGenerator-CdnYyCO6.js";import{g as M}from"./TableColumnsExpenses-CRBAmEQE.js";function K(){const e=S(),{currentPage:_,selectedRows:b,showColumnsOptions:l,showFilterOptions:L,filterOptions:n}=P(a=>a.expensesUi),{columnsExpenses:p,pageSizeExpenses:i}=P(a=>a.shared),{data:s,isFetching:c}=k({currentPage:_,pageSize:i,filterOptions:n}),{data:o,isLoading:H}=r({}),{data:m,isLoading:F}=D({}),h=o==null?void 0:o.minExpense,u=o==null?void 0:o.maxExpense;console.log(h,u);const{expensesTableColumns:g}=M(),f=s==null?void 0:s.count,C=s==null?void 0:s.expensesInfo.map(a=>({dateCreated:a.date_created.split("T")[0],employeeName:a.user_id.full_name,price:a.price,description:a.description,category:a.category_id.category,paymentMethod:a.payment_method_id.payment_method,key:a.id})),O={onChange:(a,d)=>{console.log(`selectedRowKeys: ${a}`,"selectedRows: ",d),e(G(d))},getCheckboxProps:a=>({disabled:a.name==="Disabled User",name:a.name})},y=p.length===0?g.map(a=>a.key):p,v=g.map(a=>({...a,hidden:!y.includes(a.key)})),E=(a,d)=>{e(Q(a)),d&&(console.log(d),e(T({key:"pageSizeExpenses",value:d})))},V=[{columns:[{label:"Categories",type:"select",value:"by_category",placeHolder:"Enter Training ... ",selectOptions:m==null?void 0:m.map(a=>({value:a.id,label:a.category})),defaultValue:n.length!==0?n.by_category:""},{label:"Price Range",type:"slider",value:"by_price_range",sliderMax:u,sliderMin:h,defaultValue:n.length!==0?n.by_price_range:""}]},{columns:[{label:"Date Range ",type:"date-range",value:"by_date_range",defaultValue:n.length!==0?n.by_date_range:""}]}];return{isFetching:c||H||F,data:C,pageSize:i,currentPage:_,showColumnsOptions:l,checkedListOfShownColumns:p,selectedRows:b,totalData:f,rowSelection:O,checkedList:y,handlePagination:E,newColumns:v,showFilterOptions:L,filterFormInputs:V,maxSliderFilter:u,minSliderFilter:h,setFilterOptions:x}}function J(e,_){var u,g,f,C,O,y,v,E,w,V,a,d;const{id:b}=A(),{data:l,isLoading:L}=U(b),{data:n,isLoading:p}=R({}),{data:i,isLoading:s}=D({}),{data:c,isLoading:o}=N({}),H=s||o||p||L,m=[{columns:[{label:"Price",type:"number",value:"price",placeHolder:"price to pay ... ",error:(u=e==null?void 0:e.price)==null?void 0:u.message,defaultValue:null},{label:"Payment Method",type:"select",selectOptions:c==null?void 0:c.map(t=>({value:t.id,label:t.payment_method})),name:"payment_method_id",createOption:!0,placeHolder:"Choose Training ... ",error:(g=e==null?void 0:e.payment_method_id)==null?void 0:g.message,defaultValue:null},{label:"Category",type:"select",selectOptions:i==null?void 0:i.map(t=>({value:t.id,label:t.category})),value:"category_id",createOption:!0,placeHolder:"Choose Category ... ",error:(f=e==null?void 0:e.category_id)==null?void 0:f.message,defaultValue:null}]},{columns:[{label:"Employee Name",type:"select",selectOptions:n==null?void 0:n.map(t=>({label:t.full_name,value:t.id})),name:"user_id",createOption:!1,placeHolder:" ",error:(C=e==null?void 0:e.user_id)==null?void 0:C.message,defaultValue:null},{label:"Date of income",type:"date",value:"date_created",placeHolder:"",error:(O=e==null?void 0:e.date_created)==null?void 0:O.message,defaultValue:null}]},{columns:[{label:"Description",type:"textarea",placeHolder:"any details you want to add ... ",name:"description",error:(y=e==null?void 0:e.description)==null?void 0:y.message,defaultValue:null}]}],F=[{columns:[{label:"Price",type:"number",value:"price",placeHolder:"price to pay ... ",error:(v=e==null?void 0:e.price)==null?void 0:v.message,defaultValue:l==null?void 0:l.map(t=>t.price)[0]},{label:"Payment Method",type:"select",selectOptions:c==null?void 0:c.map(t=>({value:t.id,label:t.payment_method})),name:"payment_method_id",createOption:!0,placeHolder:"Choose Training ... ",error:(E=e==null?void 0:e.payment_method_id)==null?void 0:E.message,defaultValue:l==null?void 0:l.map(t=>t.payment_method_id.id)[0]},{label:"Category",type:"select",selectOptions:i==null?void 0:i.map(t=>({value:t.id,label:t.category})),value:"category_id",createOption:!0,placeHolder:"Choose Category ... ",error:(w=e==null?void 0:e.category_id)==null?void 0:w.message,defaultValue:l==null?void 0:l.map(t=>t.category_id.id)[0]}]},{columns:[{label:"Employee Name",type:"select",selectOptions:n==null?void 0:n.map(t=>({label:t.full_name,value:t.id})),name:"user_id",createOption:!1,placeHolder:" ",error:(V=e==null?void 0:e.user_id)==null?void 0:V.message,defaultValue:l==null?void 0:l.map(t=>t.user_id.id)[0]},{label:"Date of income",type:"date",value:"date_created",placeHolder:"",error:(a=e==null?void 0:e.date_created)==null?void 0:a.message,defaultValue:l==null?void 0:l.map(t=>q(t.date_created))[0]}]},{columns:[{label:"Description",type:"textarea",placeHolder:"any details you want to add ... ",name:"description",error:(d=e==null?void 0:e.description)==null?void 0:d.message,defaultValue:l==null?void 0:l.map(t=>t.description)[0]}]}];return{expenseFormOptions:_?F:m,isLoading:H,expenseByIdInfo:l,expenseId:b}}export{K as e,J as g};
